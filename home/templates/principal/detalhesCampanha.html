{% extends "principal/base.html" %}

{% load static %}
{% block head %}
    <title>Detalhes da Campanha - Baú do Mestre</title>
    <link rel="stylesheet" href="{% static "css/detalheCampanha.css"%}"/>
{% endblock %}

{% block conteudo %}

    <div class="quest-header flex-column">

        <div class="background">
            <img class="header-child" alt="" src="{{ campanha.fotoCampanha.url }}"/>
            <div class="banner-title flex">
                <div class="left-text flex-column">
                    <h3>{{ campanha.nomeCampanha }}</h3>
                    <p>MESTRE: {{ campanha.nomeMestre.nomePerfil }}</p>
                </div>
                <img src="{% static "img/icons/DJCTQ_-_10.svg" %}" alt="">
            </div>
        </div>

        <img id="caret" src="{% static "img/icons/Caret-Down.svg" %}" alt="">

    </div>

    <div class="quest-description flex-column">
        <div class="quest-title flex-column">
            <h3>{{ campanha.nomeCampanha }}</h3>
            <p>MESTRE: {{ campanha.nomeMestre.nomePerfil }}</p>
        </div>

        <div class="description-columns flex">
            <div class="desc-left flex-column">
                <div class="description flex-column">
                    <h4>Descrição</h4>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam maximus, nunc a sodales facilisis, nisl libero rhoncus turpis, et dapibus sem eros eget neque. Nam vitae lobortis quam. Etiam semper ex ex, quis fermentum ligula pharetra sit amet. Curabitur orci enim, rhoncus nec dui ut, dictum ultricies nisi. Donec consequat nunc orci, eget porta nulla tristique vitae. Donec iaculis lectus eget metus vestibulum porta. Donec sodales a nisl sed lobortis. Nunc bibendum orci velit, ac vulputate nisl tempor quis. Mauris non efficitur orci. Sed at commodo erat. Etiam nunc augue, tempus non vehicula eget, tempus sed tellus.</p>
                </div>

                <div class="spec flex-column">
                    <h4>Especificações</h4>
                    <div class="tags flex">
                        <div class="tag">
                            <p>Dungeons & Dragons</p>
                        </div>

                        <div class="tag">
                            <p>Presencial</p>
                        </div>

                        <div class="tag">
                            <p>Medieval</p>
                        </div>
                    </div>

                    <div class="date flex">
                        <div class="date-header flex-column">
                            <p>Data da Sessão</p>
                            <p id="dia-sessao">Segunda</p>
                        </div>

                        <div class="date-info flex-column">
                            <p>Tempo da Sessão</p>
                            <p id="tempo-sessao">3h20min</p>
                        </div>
                    </div>

                    <div class="party flex-column">
                        <h4>Party</h4>

                        <table id="party">
                            <tbody class="flex-column">
                                <tr id="header" class="flex">
                                    <th><p>Nome</p></th>
                                    <th><p>Ficha</p></th>
                                    <th><p>Função</p></th>
                                    <th><p>Nivel</p></th>
                                </tr>
                                <tr class="party-box flex">
                                    <td><p>Leonardo</p></td>
                                    <td><p>Khartaisen</p></td>
                                    <td><p>Guerreiro</p></td>
                                    <td><p>12</p></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="desc-right">

            </div>
        </div>
    </div>

        {% comment %} <div class="boto-parent flex">

            <div class="quests-header flex">
                <p class="the-dragoon-hunters"></p>
            </div>

            {% if user == campanha.nomeMestre.nomePerfil %}
            <a href="{% url 'gerenciar_solicitacoes_campanha' campanha.id %}" class="botao-gerenciar-solicitacoes">Gerenciar Solicitações</a>
            {% endif %}

            <div class="header flex">

                <div class="header-leftcolumn flex">
                    <p class="lorem-ipsum-dolor">
                        {{ campanha.descricaoCampanha }}
                    </p>

                    <div class="tempo-de-sesso-container">
                        <p class="nivel-17-txt-container">Dias de sessão: {{ campanha.diasSessao }}</p>
                    </div>

                </div>

                <div class="header-img flex">
                    <div class="header-item"></div>
                    <img class="header-child" alt="" src="{{ campanha.fotoCampanha.url }}"/>
                </div>

            </div>

            <div class="status-row flex">
                <div class="jogadores flex">
                    <b class="jogadores1">Jogadores</b>
                    <div class="players">


                        {% for membro in membros %}
                            <div class="jogador1 flex">
                                <div class="nome-usuario1 flex">
                                    {% if membro.fotoConta == "Indefinido" %}
                                        <img style="background-color: white;" class="player-icon" alt="" src="{% static 'img/ain.png' %}"/>
                                    {% else %}
                                        <img style="background-color: white;" class="player-icon" alt="" src="{{ membro.fotoConta.url }}"/>
                                    {% endif %}
                                    <div class="user-data flex">
                                        <b class="nome-do-usuario"><a style="all: unset; cursor: pointer;" href="{% url 'exibir_perfil' membro.slug %}">{{ membro.nomePerfil }}</a></b>
                                        <p>{{ membro.tipo_sessao }}</p>
                                    </div>
                                </div>
                                <div class="nome-ficha">
                                    {% if membro.id == mestre.id %}
                                    <b class="mestre">MESTRE</b>
                                        {% else %}
                                            {% if user == mestre.nomePerfil %}
                                                <div class="nome-ficha">
                                                    <form method="post" action="{% url 'excluir_jogador' campanha.id membro.id %}">
                                                    {% csrf_token %}
                                                    <button type="submit" class="mestre" style="cursor: pointer;">Excluir</button>
                                                    </form>
                                                </div>
                                            {% else %}
                                        <b class="mestre">JOGADOR</b>
                                        {% endif %}
                                    {% endif %}
                                </div>

                            </div>
                        {% endfor %}

                    </div>
                </div>
                <div class="status flex">
                    <div class="icons flex">
                        <div id="theme" class="flex">
                            <i class="fantasia-medieval">{{ campanha.generoRPG }}</i>
                        </div>
                        <div id="system" class="flex">
                            <img class="dungeons-and-dragons-png-1-icon" alt="" src="{% static 'img/2662663967-dungeonsanddragonspng-1@2x.png' %}"/>
                            <i class="dungeons-and-dragons">{{ campanha.sistemaCampanha }}</i>
                        </div>
                        <div id="enviroment" class="flex">
                            <img class="vector-icon" alt="" src="{% static 'img/vector.svg' %}"/>
                            <i class="campanha-online">Campanha Online</i>
                        </div>
                    </div>
                    <p id="group-tag">Grupo: {{ membros.count }}/{{ campanha.numeroJogadores }}</p>
                </div>
            </div>

            <div class="boto flex">
                <div class="boto-child flex">
                    <b class="jogar">JOGAR</b>
                </div>
            </div>
            {% if user == mestre.nomePerfil %}
            <div class="boto flex">
                <div class="boto-child flex">
                    <form id="form-excluir-campanha" method="post" action="{% url 'excluir_campanha' campanha.id %}">
                        {% csrf_token %}
                        <button style="cursor: pointer;" type="button" class="jogar" onclick="confirmarExclusao()">Excluir Mesa</button>
                    </form>
                </div>
            </div>
        {% endif %}
        </div> {% endcomment %}

<script>
    function confirmarExclusao() {
        if (confirm("Tem certeza de que deseja excluir esta campanha?")) {
            document.getElementById("form-excluir-campanha").submit();
        }
    }
</script>

{% endblock %}
